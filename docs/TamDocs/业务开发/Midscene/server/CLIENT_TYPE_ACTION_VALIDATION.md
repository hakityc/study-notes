# ClientType Action éªŒè¯ç³»ç»Ÿ

## æ¦‚è¿°

é€šè¿‡æœåŠ¡ç«¯ç»Ÿä¸€ç»´æŠ¤é…ç½®ï¼Œç¡®ä¿ä¸åŒ `clientType` åªèƒ½ä½¿ç”¨å…¶æ”¯æŒçš„ `actions`ã€‚Web ç«¯å’ŒæœåŠ¡ç«¯å…±äº«åŒä¸€ä»½é…ç½®ï¼Œå®ç°è‡ªåŠ¨åŒæ­¥å’ŒéªŒè¯ã€‚

**å®ç°æ—¥æœŸï¼š** 2025-10-13  
**çŠ¶æ€ï¼š** âœ… å®Œæˆ

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœåŠ¡ç«¯é…ç½®ï¼ˆå”¯ä¸€æ•°æ®æºï¼‰          â”‚
â”‚   src/config/clientTypeActions.ts   â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ CLIENT_TYPE_ACTIONS         â”‚  â”‚
â”‚   â”‚ {                           â”‚  â”‚
â”‚   â”‚   web: [...],               â”‚  â”‚
â”‚   â”‚   windows: [...]            â”‚  â”‚
â”‚   â”‚ }                           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
         â”Œâ”€â”€â”€â”´â”€â”€â”€â”
         â”‚       â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”
    â”‚ API   â”‚ â”‚ WS   â”‚
    â”‚ è·¯ç”±  â”‚ â”‚ éªŒè¯ â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜
        â”‚        â”‚
        â–¼        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Web ç«¯ â”‚ â”‚  æ¶ˆæ¯    â”‚
   â”‚  UI    â”‚ â”‚  å¤„ç†    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒé…ç½®

### é…ç½®æ–‡ä»¶ï¼š`src/config/clientTypeActions.ts`

```typescript
export const CLIENT_TYPE_ACTIONS: Record<ClientType, ActionConfig[]> = {
  web: [
    {
      action: WebSocketAction.CONNECT_TAB,
      name: 'è¿æ¥æ ‡ç­¾é¡µ',
      description: 'è¿æ¥æµè§ˆå™¨æ ‡ç­¾é¡µ',
      category: 'system',
    },
    {
      action: WebSocketAction.AI,
      name: 'AI æ‰§è¡Œ',
      description: 'æ‰§è¡Œ AI è‡ªç„¶è¯­è¨€æŒ‡ä»¤',
      category: 'basic',
    },
    // ... æ›´å¤š actions
  ],
  windows: [
    {
      action: WebSocketAction.AI,
      name: 'AI æ‰§è¡Œ',
      description: 'æ‰§è¡Œ Windows æ¡Œé¢ AI æŒ‡ä»¤',
      category: 'basic',
    },
    // ... æ›´å¤š actions
  ],
};
```

**é…ç½®å­—æ®µè¯´æ˜ï¼š**

- `action`: Action æšä¸¾å€¼
- `name`: æ˜¾ç¤ºåç§°
- `description`: è¯¦ç»†æè¿°
- `category`: åˆ†ç±»ï¼ˆbasic/advanced/systemï¼‰

## API æ¥å£

### 1. è·å–å®Œæ•´é…ç½®

```http
GET /api/client-type-actions
```

**å“åº”ï¼š**

```json
{
  "success": true,
  "data": {
    "clientTypes": ["web", "windows"],
    "actions": {
      "web": [
        {
          "action": "connectTab",
          "name": "è¿æ¥æ ‡ç­¾é¡µ",
          "description": "è¿æ¥æµè§ˆå™¨æ ‡ç­¾é¡µ",
          "category": "system"
        },
        // ... æ›´å¤š actions
      ],
      "windows": [...]
    }
  }
}
```

### 2. è·å–æ‰€æœ‰å®¢æˆ·ç«¯ç±»å‹

```http
GET /api/client-type-actions/types
```

**å“åº”ï¼š**

```json
{
  "success": true,
  "data": ["web", "windows"]
}
```

### 3. è·å–æŒ‡å®šå®¢æˆ·ç«¯ç±»å‹çš„ Actions

```http
GET /api/client-type-actions/:clientType
```

**ç¤ºä¾‹ï¼š**

```http
GET /api/client-type-actions/web
GET /api/client-type-actions/windows
```

**å“åº”ï¼š**

```json
{
  "success": true,
  "data": {
    "clientType": "web",
    "actions": ["connectTab", "ai", "aiScript", ...],
    "configs": [
      {
        "action": "connectTab",
        "name": "è¿æ¥æ ‡ç­¾é¡µ",
        "description": "è¿æ¥æµè§ˆå™¨æ ‡ç­¾é¡µ",
        "category": "system"
      },
      // ... æ›´å¤š configs
    ]
  }
}
```

### 4. è·å–è¯¦ç»†é…ç½®

```http
GET /api/client-type-actions/:clientType/configs
```

**å“åº”ï¼š**

```json
{
  "success": true,
  "data": {
    "clientType": "web",
    "configs": [...],
    "total": 6
  }
}
```

## æœåŠ¡ç«¯éªŒè¯

### WebSocket æ¶ˆæ¯éªŒè¯

åœ¨ `src/websocket/index.ts` ä¸­è‡ªåŠ¨éªŒè¯ï¼š

```typescript
// éªŒè¯ action æ˜¯å¦è¢« clientType æ”¯æŒ
const clientType = message.meta?.clientType || 'web';
const validation = validateMessageAction(clientType, action);

if (!validation.valid) {
  // è¿”å›é”™è¯¯æ¶ˆæ¯
  const errorMessage = MessageBuilder.createErrorResponse(
    message,
    validation.error || 'Action ä¸æ”¯æŒ',
  );
  sendMessage(ws, errorMessage);
  return;
}
```

**é”™è¯¯å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "meta": { ... },
  "payload": {
    "action": "connectTab",
    "status": "failed",
    "error": "Action 'connectTab' ä¸æ”¯æŒ windows ç«¯ã€‚æ”¯æŒçš„ actions: ai, aiScript, command"
  }
}
```

## Web ç«¯é›†æˆ

### 1. Hookï¼š`useClientTypeActions`

```typescript
const {
  config,                         // å®Œæ•´é…ç½®
  loading,                        // åŠ è½½çŠ¶æ€
  error,                          // é”™è¯¯ä¿¡æ¯
  getActionsForClientType,        // è·å–å¯ç”¨ actions
  getActionNamesForClientType,    // è·å– action åç§°åˆ—è¡¨
  isActionSupported,              // æ£€æŸ¥æ˜¯å¦æ”¯æŒ
  getActionsByCategory,           // æŒ‰ç±»åˆ«åˆ†ç»„
} = useClientTypeActions();
```

### 2. ActionSelector ç»„ä»¶

**è‡ªåŠ¨åŠŸèƒ½ï¼š**

- âœ… æ ¹æ® `clientType` åŠ¨æ€æ˜¾ç¤ºå¯ç”¨ actions
- âœ… æŒ‰ç±»åˆ«åˆ†ç»„ï¼ˆåŸºç¡€/é«˜çº§/ç³»ç»Ÿï¼‰
- âœ… æ˜¾ç¤º action è¯¦ç»†æè¿°
- âœ… ä¸æ”¯æŒçš„ action æ˜¾ç¤ºè­¦å‘Š
- âœ… æ˜¾ç¤ºå®¢æˆ·ç«¯å›¾æ ‡å’Œæ”¯æŒæ•°é‡
- âœ… åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†

**ä½¿ç”¨æ–¹å¼ï¼š**

```tsx
<ActionSelector
  value={action}
  onChange={setAction}
  clientType={meta.clientType || 'web'}
/>
```

### 3. UI æ•ˆæœ

#### é€‰æ‹© Web ç«¯æ—¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹© Action ç±»å‹ ğŸ“± (web ç«¯)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI æ‰§è¡Œ â–¼                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚
â”‚ åŸºç¡€æ“ä½œ                          â”‚
â”‚   - AI æ‰§è¡Œ                       â”‚
â”‚ é«˜çº§æ“ä½œ                          â”‚
â”‚   - AI è„šæœ¬                       â”‚
â”‚   - ä¸‹è½½è§†é¢‘                      â”‚
â”‚   - ç«™ç‚¹è„šæœ¬                      â”‚
â”‚ ç³»ç»Ÿæ“ä½œ                          â”‚
â”‚   - è¿æ¥æ ‡ç­¾é¡µ                    â”‚
â”‚   - æœåŠ¡å‘½ä»¤                      â”‚
â”‚                                   â”‚
â”‚ ğŸ’¡ æ‰§è¡Œ AI è‡ªç„¶è¯­è¨€æŒ‡ä»¤           â”‚
â”‚ ğŸ“Š web ç«¯æ”¯æŒ 6 ä¸ªæ“ä½œ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é€‰æ‹© Windows ç«¯æ—¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹© Action ç±»å‹ ğŸ–¥ï¸ (windows ç«¯) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI æ‰§è¡Œ â–¼                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚
â”‚ åŸºç¡€æ“ä½œ                          â”‚
â”‚   - AI æ‰§è¡Œ                       â”‚
â”‚ é«˜çº§æ“ä½œ                          â”‚
â”‚   - AI è„šæœ¬                       â”‚
â”‚ ç³»ç»Ÿæ“ä½œ                          â”‚
â”‚   - æœåŠ¡å‘½ä»¤                      â”‚
â”‚                                   â”‚
â”‚ ğŸ’¡ æ‰§è¡Œ Windows æ¡Œé¢ AI æŒ‡ä»¤      â”‚
â”‚ ğŸ“Š windows ç«¯æ”¯æŒ 3 ä¸ªæ“ä½œ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä¸æ”¯æŒè­¦å‘Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ å½“å‰ Action "connectTab"       â”‚
â”‚    ä¸æ”¯æŒ windows ç«¯              â”‚
â”‚                                   â”‚
â”‚ è¯·é€‰æ‹©å…¶ä»– Action æˆ–åˆ‡æ¢å®¢æˆ·ç«¯ç±»å‹â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å·¥å…·å‡½æ•°

### æœåŠ¡ç«¯ï¼ˆ`src/config/clientTypeActions.ts`ï¼‰

```typescript
// è·å–æ”¯æŒçš„ actions
getSupportedActions('web')
// => ['connectTab', 'ai', 'aiScript', ...]

// è·å–å®Œæ•´é…ç½®
getActionConfigs('windows')
// => [{ action: 'ai', name: 'AI æ‰§è¡Œ', ... }, ...]

// éªŒè¯ action
isActionSupported('windows', 'connectTab')
// => false

// éªŒè¯æ¶ˆæ¯
validateMessageAction('windows', 'connectTab')
// => { valid: false, error: "Action 'connectTab' ä¸æ”¯æŒ..." }
```

### Web ç«¯ï¼ˆ`useClientTypeActions` hookï¼‰

```typescript
// è·å–å¯ç”¨ actions
const actions = getActionsForClientType('web');

// æŒ‰ç±»åˆ«åˆ†ç»„
const { basic, advanced, system } = getActionsByCategory('web');

// æ£€æŸ¥æ”¯æŒ
const supported = isActionSupported('windows', 'connectTab');
```

## æ·»åŠ æ–° Action

### æ­¥éª¤ 1: åœ¨é…ç½®ä¸­æ·»åŠ 

ç¼–è¾‘ `src/config/clientTypeActions.ts`ï¼š

```typescript
export const CLIENT_TYPE_ACTIONS = {
  web: [
    // ... ç°æœ‰ actions
    {
      action: WebSocketAction.NEW_ACTION,  // æ–° action
      name: 'æ–°åŠŸèƒ½',
      description: 'è¿™æ˜¯ä¸€ä¸ªæ–°åŠŸèƒ½',
      category: 'advanced',
    },
  ],
  windows: [
    // å¦‚æœ Windows ä¹Ÿæ”¯æŒï¼Œæ·»åŠ åˆ°è¿™é‡Œ
  ],
};
```

### æ­¥éª¤ 2: å®ç° Handler

åˆ›å»ºå¯¹åº”çš„ handler æ–‡ä»¶ï¼š

- Web: `src/websocket/actions/newAction.ts`
- Windows: `src/websocket/actions/windows/newAction.ts`

### æ­¥éª¤ 3: æ³¨å†Œ Handler

åœ¨ `src/websocket/handlers/messageHandlers.ts` ä¸­æ³¨å†Œã€‚

### æ­¥éª¤ 4: æµ‹è¯•

1. é‡å¯æœåŠ¡å™¨
2. Web ç«¯è‡ªåŠ¨ä» API è·å–æœ€æ–°é…ç½®
3. ActionSelector è‡ªåŠ¨æ˜¾ç¤ºæ–° action

**æ— éœ€ä¿®æ”¹ Web ç«¯ä»£ç ï¼**

## ä¼˜åŠ¿

### 1. å•ä¸€æ•°æ®æº

- âœ… æœåŠ¡ç«¯ç»Ÿä¸€ç»´æŠ¤
- âœ… é¿å…é…ç½®ä¸åŒæ­¥
- âœ… æ˜“äºç®¡ç†å’Œæ›´æ–°

### 2. è‡ªåŠ¨åŒæ­¥

- âœ… Web ç«¯å¯åŠ¨æ—¶è‡ªåŠ¨è·å–
- âœ… æ— éœ€æ‰‹åŠ¨æ›´æ–°å‰ç«¯ä»£ç 
- âœ… é…ç½®å˜æ›´ç«‹å³ç”Ÿæ•ˆ

### 3. ç±»å‹å®‰å…¨

- âœ… TypeScript ç±»å‹æ£€æŸ¥
- âœ… ç¼–è¯‘æ—¶é”™è¯¯æç¤º
- âœ… IDE è‡ªåŠ¨è¡¥å…¨

### 4. ç”¨æˆ·å‹å¥½

- âœ… åŠ¨æ€æ˜¾ç¤ºå¯ç”¨æ“ä½œ
- âœ… ä¸æ”¯æŒçš„æ“ä½œæ˜¾ç¤ºè­¦å‘Š
- âœ… åˆ†ç±»å±•ç¤ºï¼Œæ˜“äºæŸ¥æ‰¾
- âœ… è¯¦ç»†æè¿°å’Œæç¤º

### 5. å®‰å…¨æ€§

- âœ… æœåŠ¡ç«¯éªŒè¯æ‰€æœ‰è¯·æ±‚
- âœ… é˜²æ­¢éæ³• action
- âœ… è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

## å½“å‰é…ç½®

### Web ç«¯ï¼ˆ6 ä¸ªæ“ä½œï¼‰

| Action | åç§° | ç±»åˆ« |
|--------|------|------|
| `connectTab` | è¿æ¥æ ‡ç­¾é¡µ | ç³»ç»Ÿ |
| `ai` | AI æ‰§è¡Œ | åŸºç¡€ |
| `aiScript` | AI è„šæœ¬ | é«˜çº§ |
| `downloadVideo` | ä¸‹è½½è§†é¢‘ | é«˜çº§ |
| `siteScript` | ç«™ç‚¹è„šæœ¬ | é«˜çº§ |
| `command` | æœåŠ¡å‘½ä»¤ | ç³»ç»Ÿ |

### Windows ç«¯ï¼ˆ3 ä¸ªæ“ä½œï¼‰

| Action | åç§° | ç±»åˆ« |
|--------|------|------|
| `ai` | AI æ‰§è¡Œ | åŸºç¡€ |
| `aiScript` | AI è„šæœ¬ | é«˜çº§ |
| `command` | æœåŠ¡å‘½ä»¤ | ç³»ç»Ÿ |

## æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: æ­£å¸¸æµç¨‹

```
1. Web ç«¯å¯åŠ¨
2. è‡ªåŠ¨è°ƒç”¨ /api/client-type-actions
3. è·å–é…ç½®æˆåŠŸ
4. ActionSelector æ˜¾ç¤ºå¯ç”¨ actions
5. ç”¨æˆ·é€‰æ‹© action
6. å‘é€æ¶ˆæ¯
7. æœåŠ¡ç«¯éªŒè¯é€šè¿‡
8. æ‰§è¡ŒæˆåŠŸ
```

### åœºæ™¯ 2: åˆ‡æ¢å®¢æˆ·ç«¯ç±»å‹

```
1. ç”¨æˆ·é€‰æ‹© web ç«¯
2. ActionSelector æ˜¾ç¤º 6 ä¸ª actions
3. ç”¨æˆ·é€‰æ‹© "connectTab"
4. ç”¨æˆ·åˆ‡æ¢åˆ° windows ç«¯
5. ActionSelector æ˜¾ç¤º 3 ä¸ª actions
6. æ˜¾ç¤ºè­¦å‘Šï¼š"connectTab ä¸æ”¯æŒ windows ç«¯"
7. ç”¨æˆ·é€‰æ‹© "ai"
8. è­¦å‘Šæ¶ˆå¤±ï¼Œæ­£å¸¸ä½¿ç”¨
```

### åœºæ™¯ 3: éæ³• Action

```
1. ç”¨æˆ·ä¿®æ”¹ JSONï¼Œæ‰‹åŠ¨æ·»åŠ ä¸æ”¯æŒçš„ action
2. å‘é€æ¶ˆæ¯
3. æœåŠ¡ç«¯éªŒè¯å¤±è´¥
4. è¿”å›é”™è¯¯ï¼š
   "Action 'connectTab' ä¸æ”¯æŒ windows ç«¯ã€‚
    æ”¯æŒçš„ actions: ai, aiScript, command"
5. æ¶ˆæ¯ç›‘æ§æ˜¾ç¤ºé”™è¯¯
```

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: Web ç«¯æ— æ³•åŠ è½½é…ç½®

**ç—‡çŠ¶ï¼š** ActionSelector æ˜¾ç¤ºåŠ è½½å¤±è´¥

**è§£å†³ï¼š**

1. æ£€æŸ¥æœåŠ¡ç«¯æ˜¯å¦å¯åŠ¨ï¼š`http://localhost:3000`
2. æ£€æŸ¥ API æ˜¯å¦å¯è®¿é—®ï¼š`curl http://localhost:3000/api/client-type-actions`
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œè¯·æ±‚
4. ç¡®è®¤ CORS é…ç½®æ­£ç¡®

### é—®é¢˜ 2: ActionSelector æ˜¾ç¤ºç©ºç™½

**ç—‡çŠ¶ï¼š** æ²¡æœ‰å¯é€‰çš„ actions

**è§£å†³ï¼š**

1. æ£€æŸ¥ `clientType` æ˜¯å¦æ­£ç¡®ä¼ é€’
2. æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯¥ clientType
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### é—®é¢˜ 3: æœåŠ¡ç«¯éªŒè¯å¤±è´¥

**ç—‡çŠ¶ï¼š** æ¶ˆæ¯å‘é€åè¿”å› "Action ä¸æ”¯æŒ"

**è§£å†³ï¼š**

1. ç¡®è®¤ `meta.clientType` æ­£ç¡®
2. ç¡®è®¤ action åœ¨é…ç½®ä¸­å­˜åœ¨
3. æ£€æŸ¥æœåŠ¡ç«¯æ—¥å¿—
4. éªŒè¯é…ç½®åŒæ­¥

## ç›¸å…³æ–‡ä»¶

### æœåŠ¡ç«¯

- `src/config/clientTypeActions.ts` - é…ç½®æ–‡ä»¶
- `src/routes/clientTypeActions.ts` - API è·¯ç”±
- `src/websocket/index.ts` - WebSocket éªŒè¯
- `src/routes/index.ts` - è·¯ç”±æ³¨å†Œ

### Web ç«¯

- `src/hooks/useClientTypeActions.ts` - Hook
- `src/components/debug/ActionSelector.tsx` - ç»„ä»¶
- `src/pages/midsceneDebugPage.tsx` - é¡µé¢é›†æˆ

## æœ€ä½³å®è·µ

### 1. é…ç½®ç®¡ç†

- åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¯¦ç»†çš„æè¿°
- ä½¿ç”¨æ¸…æ™°çš„åˆ†ç±»
- ä¿æŒå‘½åä¸€è‡´æ€§

### 2. æ·»åŠ æ–° Action

```
1. å…ˆåœ¨é…ç½®ä¸­æ·»åŠ 
2. å®ç° handler
3. æ³¨å†Œ handler
4. æµ‹è¯•éªŒè¯
5. æ›´æ–°æ–‡æ¡£
```

### 3. é”™è¯¯å¤„ç†

- æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
- æŒ‡æ˜æ”¯æŒçš„ actions
- è®°å½•è¯¦ç»†æ—¥å¿—

### 4. ç”¨æˆ·ä½“éªŒ

- åˆ†ç±»æ˜¾ç¤º actions
- æä¾›è¯¦ç»†æè¿°
- æ˜¾ç¤ºä¸æ”¯æŒè­¦å‘Š
- åŠ è½½çŠ¶æ€æç¤º

## æœªæ¥æ‰©å±•

### çŸ­æœŸ

- [ ] æ·»åŠ  action çš„å›¾æ ‡
- [ ] æ”¯æŒ action æœç´¢
- [ ] æ·»åŠ  action ä½¿ç”¨ç¤ºä¾‹

### ä¸­æœŸ

- [ ] åŠ¨æ€æƒé™æ§åˆ¶
- [ ] Action ä¾èµ–å…³ç³»
- [ ] æ‰¹é‡æ“ä½œæ”¯æŒ

### é•¿æœŸ

- [ ] æ’ä»¶åŒ– action ç³»ç»Ÿ
- [ ] ç”¨æˆ·è‡ªå®šä¹‰ action
- [ ] Action å¸‚åœº

## æ€»ç»“

é€šè¿‡æœåŠ¡ç«¯ç»Ÿä¸€ç»´æŠ¤é…ç½®ï¼Œå®ç°äº†ï¼š

- âœ… é…ç½®é›†ä¸­ç®¡ç†
- âœ… Web ç«¯è‡ªåŠ¨åŒæ­¥
- âœ… æœåŠ¡ç«¯ä¸¥æ ¼éªŒè¯
- âœ… ç”¨æˆ·å‹å¥½çš„ UI
- âœ… ç±»å‹å®‰å…¨ä¿éšœ
- âœ… æ˜“äºæ‰©å±•ç»´æŠ¤

è¿™å¤§å¤§ç®€åŒ–äº†ä¸åŒ clientType çš„ action ç®¡ç†ï¼Œç¡®ä¿äº†ç³»ç»Ÿçš„ä¸€è‡´æ€§å’Œå®‰å…¨æ€§ï¼

---

**ç»´æŠ¤è€…ï¼š** å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°ï¼š** 2025-10-13  
**çŠ¶æ€ï¼š** âœ… ç”Ÿäº§å°±ç»ª
