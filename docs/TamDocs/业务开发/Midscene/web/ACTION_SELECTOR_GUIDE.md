# ActionSelector æ™ºèƒ½é€‰æ‹©å™¨ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

ActionSelector ç°åœ¨æ˜¯ä¸€ä¸ªæ™ºèƒ½ç»„ä»¶ï¼Œå¯ä»¥æ ¹æ®é€‰æ‹©çš„å®¢æˆ·ç«¯ç±»å‹åŠ¨æ€æ˜¾ç¤ºå¯ç”¨çš„æ“ä½œã€‚

**æ›´æ–°æ—¥æœŸï¼š** 2025-10-13

## æ ¸å¿ƒç‰¹æ€§

### âœ¨ åŠ¨æ€ Action åˆ—è¡¨

æ ¹æ® `clientType` è‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”çš„å¯ç”¨æ“ä½œï¼š

- **Web ç«¯ï¼š** 6 ä¸ªæ“ä½œï¼ˆæµè§ˆå™¨ç›¸å…³ï¼‰
- **Windows ç«¯ï¼š** 3 ä¸ªæ“ä½œï¼ˆæ¡Œé¢ç›¸å…³ï¼‰

### ğŸ¯ æ™ºèƒ½åˆ†ç±»

Actions æŒ‰åŠŸèƒ½åˆ†ä¸ºä¸‰ç±»ï¼š

1. **åŸºç¡€æ“ä½œ** - æ—¥å¸¸ä½¿ç”¨çš„æ ¸å¿ƒåŠŸèƒ½
2. **é«˜çº§æ“ä½œ** - å¤æ‚åœºæ™¯å’Œä¸“ä¸šåŠŸèƒ½
3. **ç³»ç»Ÿæ“ä½œ** - æœåŠ¡æ§åˆ¶å’Œç³»ç»Ÿç®¡ç†

### âš ï¸ å®æ—¶éªŒè¯

- é€‰æ‹©ä¸æ”¯æŒçš„ action æ—¶æ˜¾ç¤ºè­¦å‘Š
- åˆ‡æ¢å®¢æˆ·ç«¯ç±»å‹æ—¶è‡ªåŠ¨éªŒè¯
- æä¾›æ¸…æ™°çš„é”™è¯¯æç¤º

### ğŸ“Š çŠ¶æ€å±•ç¤º

- æ˜¾ç¤ºå½“å‰å®¢æˆ·ç«¯ç±»å‹å›¾æ ‡
- æ˜¾ç¤ºæ”¯æŒçš„æ“ä½œæ•°é‡
- æ˜¾ç¤ºé€‰ä¸­æ“ä½œçš„è¯¦ç»†æè¿°

## ç•Œé¢å±•ç¤º

### Web ç«¯é€‰æ‹©å™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹© Action ç±»å‹ ğŸ“± (web ç«¯)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI æ‰§è¡Œ â–¼                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚ ä¸‹æ‹‰å±•å¼€åï¼š                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ åŸºç¡€æ“ä½œ                       â”‚ â”‚
â”‚ â”‚   â€¢ AI æ‰§è¡Œ                    â”‚ â”‚
â”‚ â”‚                                â”‚ â”‚
â”‚ â”‚ é«˜çº§æ“ä½œ                       â”‚ â”‚
â”‚ â”‚   â€¢ AI è„šæœ¬                    â”‚ â”‚
â”‚ â”‚   â€¢ ä¸‹è½½è§†é¢‘                   â”‚ â”‚
â”‚ â”‚   â€¢ ç«™ç‚¹è„šæœ¬                   â”‚ â”‚
â”‚ â”‚                                â”‚ â”‚
â”‚ â”‚ ç³»ç»Ÿæ“ä½œ                       â”‚ â”‚
â”‚ â”‚   â€¢ è¿æ¥æ ‡ç­¾é¡µ                 â”‚ â”‚
â”‚ â”‚   â€¢ æœåŠ¡å‘½ä»¤                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚ ğŸ’¡ æ‰§è¡Œ AI è‡ªç„¶è¯­è¨€æŒ‡ä»¤            â”‚
â”‚ ğŸ“Š web ç«¯æ”¯æŒ 6 ä¸ªæ“ä½œ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Windows ç«¯é€‰æ‹©å™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹© Action ç±»å‹ ğŸ–¥ï¸ (windows ç«¯)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI æ‰§è¡Œ â–¼                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚ ä¸‹æ‹‰å±•å¼€åï¼š                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ åŸºç¡€æ“ä½œ                       â”‚ â”‚
â”‚ â”‚   â€¢ AI æ‰§è¡Œ                    â”‚ â”‚
â”‚ â”‚                                â”‚ â”‚
â”‚ â”‚ é«˜çº§æ“ä½œ                       â”‚ â”‚
â”‚ â”‚   â€¢ AI è„šæœ¬                    â”‚ â”‚
â”‚ â”‚                                â”‚ â”‚
â”‚ â”‚ ç³»ç»Ÿæ“ä½œ                       â”‚ â”‚
â”‚ â”‚   â€¢ æœåŠ¡å‘½ä»¤                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚ ğŸ’¡ æ‰§è¡Œ Windows æ¡Œé¢ AI æŒ‡ä»¤       â”‚
â”‚ ğŸ“Š windows ç«¯æ”¯æŒ 3 ä¸ªæ“ä½œ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸æ”¯æŒè­¦å‘Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ å½“å‰ Action "connectTab"        â”‚
â”‚    ä¸æ”¯æŒ windows ç«¯               â”‚
â”‚                                    â”‚
â”‚ è¯·é€‰æ‹©å…¶ä»– Action æˆ–åˆ‡æ¢å®¢æˆ·ç«¯ç±»å‹ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨æµç¨‹

### åŸºæœ¬æµç¨‹

```
1. é€‰æ‹©å®¢æˆ·ç«¯ç±»å‹ï¼ˆWeb/Windowsï¼‰
   â†“
2. ActionSelector è‡ªåŠ¨åˆ·æ–°å¯ç”¨æ“ä½œ
   â†“
3. é€‰æ‹©éœ€è¦çš„æ“ä½œ
   â†“
4. æŸ¥çœ‹æ“ä½œæè¿°
   â†“
5. å¡«å†™å‚æ•°å¹¶å‘é€
```

### åˆ‡æ¢åœºæ™¯

```
åœºæ™¯ï¼šä» Web åˆ‡æ¢åˆ° Windows

1. å½“å‰çŠ¶æ€ï¼š
   - å®¢æˆ·ç«¯ï¼šWeb
   - Actionï¼šconnectTabï¼ˆè¿æ¥æ ‡ç­¾é¡µï¼‰
   
2. åˆ‡æ¢å®¢æˆ·ç«¯ä¸º Windows
   â†“
3. æ˜¾ç¤ºè­¦å‘Šï¼š
   âš ï¸ "connectTab" ä¸æ”¯æŒ windows ç«¯
   
4. é€‰æ‹©æ”¯æŒçš„ actionï¼š
   - é€‰æ‹© "ai" æˆ– "aiScript" æˆ– "command"
   
5. è­¦å‘Šæ¶ˆå¤±ï¼Œæ­£å¸¸ä½¿ç”¨
```

## ç»„ä»¶å±æ€§

```typescript
interface ActionSelectorProps {
  value: WebSocketAction;           // å½“å‰é€‰ä¸­çš„ action
  onChange: (value: WebSocketAction) => void;  // æ”¹å˜å›è°ƒ
  clientType: ClientType;            // å®¢æˆ·ç«¯ç±»å‹ï¼ˆå¿…éœ€ï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```tsx
<ActionSelector
  value={action}
  onChange={setAction}
  clientType={meta.clientType || 'web'}
/>
```

## çŠ¶æ€è¯´æ˜

### åŠ è½½ä¸­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”„ åŠ è½½å¯ç”¨æ“ä½œ...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŸå› ï¼š** æ­£åœ¨ä»æœåŠ¡ç«¯è·å–é…ç½®

**è§£å†³ï¼š** ç­‰å¾…åŠ è½½å®Œæˆï¼ˆé€šå¸¸ < 1 ç§’ï¼‰

### åŠ è½½å¤±è´¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ åŠ è½½å¤±è´¥: [é”™è¯¯ä¿¡æ¯]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŸå› ï¼š**

- æœåŠ¡ç«¯æœªå¯åŠ¨
- ç½‘ç»œè¿æ¥é—®é¢˜
- API æ¥å£é”™è¯¯

**è§£å†³ï¼š**

1. ç¡®è®¤æœåŠ¡ç«¯è¿è¡Œ
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. åˆ·æ–°é¡µé¢é‡è¯•

### æ­£å¸¸ä½¿ç”¨

æ˜¾ç¤ºåˆ†ç±»çš„ action åˆ—è¡¨ï¼ŒåŒ…æ‹¬ï¼š

- æ“ä½œåç§°
- æ“ä½œæè¿°
- æ”¯æŒæ•°é‡ç»Ÿè®¡
- å®¢æˆ·ç«¯ç±»å‹å›¾æ ‡

## å®ç”¨æŠ€å·§

### æŠ€å·§ 1: å¿«é€Ÿåˆ‡æ¢

```
1. åˆ‡æ¢å®¢æˆ·ç«¯ç±»å‹
2. ActionSelector è‡ªåŠ¨æ›´æ–°
3. å¦‚æœå½“å‰ action ä¸æ”¯æŒï¼Œä¼šæ˜¾ç¤ºè­¦å‘Š
4. é€‰æ‹©ä¸€ä¸ªæ”¯æŒçš„ action ç»§ç»­
```

### æŠ€å·§ 2: æŸ¥çœ‹æè¿°

```
æ¯ä¸ª action é€‰ä¸­åéƒ½ä¼šæ˜¾ç¤ºè¯¦ç»†æè¿°ï¼š
ğŸ’¡ æ‰§è¡Œ AI è‡ªç„¶è¯­è¨€æŒ‡ä»¤
```

### æŠ€å·§ 3: æŒ‰ç±»åˆ«æµè§ˆ

```
ä¸‹æ‹‰åˆ—è¡¨æŒ‰ç±»åˆ«åˆ†ç»„ï¼š
â”œâ”€ åŸºç¡€æ“ä½œ
â”‚  â””â”€ AI æ‰§è¡Œ
â”œâ”€ é«˜çº§æ“ä½œ
â”‚  â”œâ”€ AI è„šæœ¬
â”‚  â”œâ”€ ä¸‹è½½è§†é¢‘
â”‚  â””â”€ ç«™ç‚¹è„šæœ¬
â””â”€ ç³»ç»Ÿæ“ä½œ
   â”œâ”€ è¿æ¥æ ‡ç­¾é¡µ
   â””â”€ æœåŠ¡å‘½ä»¤
```

### æŠ€å·§ 4: ç¡®è®¤æ”¯æŒ

```
æŸ¥çœ‹åº•éƒ¨çš„ç»Ÿè®¡ä¿¡æ¯ï¼š
ğŸ“Š web ç«¯æ”¯æŒ 6 ä¸ªæ“ä½œ
ğŸ“Š windows ç«¯æ”¯æŒ 3 ä¸ªæ“ä½œ
```

## å¯¹æ¯”è¡¨æ ¼

### åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ |
|------|-------|--------|
| Action åˆ—è¡¨ | é™æ€ç¡¬ç¼–ç  | âœ… åŠ¨æ€ä»æœåŠ¡ç«¯è·å– |
| è·¨å¹³å°æ”¯æŒ | æ‰€æœ‰ action éƒ½æ˜¾ç¤º | âœ… æ ¹æ® clientType è¿‡æ»¤ |
| åˆ†ç±»å±•ç¤º | æ— åˆ†ç±» | âœ… æŒ‰ç±»åˆ«åˆ†ç»„ |
| éªŒè¯æç¤º | æ—  | âœ… å®æ—¶è­¦å‘Š |
| é…ç½®åŒæ­¥ | æ‰‹åŠ¨æ›´æ–°ä»£ç  | âœ… è‡ªåŠ¨åŒæ­¥ |

### UI å¯¹æ¯”

| å…ƒç´  | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ |
|------|-------|--------|
| å®¢æˆ·ç«¯å›¾æ ‡ | æ—  | âœ… ğŸ“±/ğŸ–¥ï¸ |
| åˆ†ç±»æ ‡ç­¾ | æ—  | âœ… åŸºç¡€/é«˜çº§/ç³»ç»Ÿ |
| æ“ä½œç»Ÿè®¡ | æ—  | âœ… æ˜¾ç¤ºæ•°é‡ |
| ä¸æ”¯æŒè­¦å‘Š | æ—  | âœ… é»„è‰²è­¦å‘Šæ¡† |
| åŠ è½½çŠ¶æ€ | æ—  | âœ… åŠ è½½åŠ¨ç”» |

## å¼€å‘è€…æŒ‡å—

### æ·»åŠ æ–° Actionï¼ˆå®Œæ•´æµç¨‹ï¼‰

#### 1. æ›´æ–°æšä¸¾ï¼ˆå¦‚æœéœ€è¦ï¼‰

```typescript
// src/utils/enums.ts
export enum WebSocketAction {
  // ... ç°æœ‰
  YOUR_NEW_ACTION = 'yourNewAction',  // æ·»åŠ æ–°æšä¸¾
}
```

#### 2. æ·»åŠ åˆ°é…ç½®

```typescript
// src/config/clientTypeActions.ts
export const CLIENT_TYPE_ACTIONS = {
  web: [
    {
      action: WebSocketAction.YOUR_NEW_ACTION,
      name: 'æ–°åŠŸèƒ½åç§°',
      description: 'è¿™æ˜¯ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œç”¨äº...',
      category: 'advanced',
    },
    // ...
  ],
};
```

#### 3. å®ç° Handler

```typescript
// src/websocket/actions/yourNewAction.ts
export function createYourNewActionHandler(): MessageHandler {
  return async ({ send }, message) => {
    // å®ç°é€»è¾‘
  };
}
```

#### 4. æ³¨å†Œ Handler

```typescript
// src/websocket/handlers/messageHandlers.ts
import { createYourNewActionHandler } from '../actions/yourNewAction';

export function createWebMessageHandlers() {
  return {
    // ...
    [WebSocketAction.YOUR_NEW_ACTION]: createYourNewActionHandler(),
  };
}
```

#### 5. æµ‹è¯•

```
1. é‡å¯æœåŠ¡å™¨
2. åˆ·æ–° Web é¡µé¢
3. é€‰æ‹© Web ç«¯
4. åœ¨ ActionSelector ä¸­çœ‹åˆ°æ–° action
5. æµ‹è¯•åŠŸèƒ½
```

### ä¿®æ”¹ç°æœ‰ Action

#### åªæ”¹æè¿°

```typescript
// src/config/clientTypeActions.ts
{
  action: WebSocketAction.AI,
  name: 'AI æ‰§è¡Œ',
  description: 'æ–°çš„æè¿°æ–‡æœ¬',  // â† åªæ”¹è¿™é‡Œ
  category: 'basic',
}
```

**æ— éœ€é‡å¯ï¼Œåˆ·æ–°é¡µé¢å³å¯ã€‚**

#### æ”¹å˜åˆ†ç±»

```typescript
{
  action: WebSocketAction.SITE_SCRIPT,
  name: 'ç«™ç‚¹è„šæœ¬',
  description: '...',
  category: 'system',  // ä» 'advanced' æ”¹ä¸º 'system'
}
```

**é‡å¯æœåŠ¡å™¨ï¼Œåˆ·æ–°é¡µé¢ã€‚**

#### ç§»é™¤ Action

```typescript
// ä»æ•°ç»„ä¸­åˆ é™¤å¯¹åº”é…ç½®
export const CLIENT_TYPE_ACTIONS = {
  web: [
    // { action: WebSocketAction.OLD_ACTION, ... },  â† æ³¨é‡Šæˆ–åˆ é™¤
    { action: WebSocketAction.AI, ... },
    // ...
  ],
};
```

**é‡å¯æœåŠ¡å™¨ï¼Œåˆ·æ–°é¡µé¢ã€‚**

## è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹åŠ è½½çš„é…ç½®

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼š

```javascript
// åœ¨ useClientTypeActions hook ä¸­æ‰“å°
console.log('Loaded config:', config);
```

### 2. éªŒè¯ API å“åº”

```bash
curl http://localhost:3000/api/client-type-actions | jq
```

### 3. æ£€æŸ¥ç½‘ç»œè¯·æ±‚

æµè§ˆå™¨å¼€å‘è€…å·¥å…· â†’ Network â†’ æœç´¢ `client-type-actions`

### 4. æ¨¡æ‹Ÿä¸åŒåœºæ™¯

```typescript
// ä¸´æ—¶ä¿®æ”¹ clientType æµ‹è¯•
const testClientType = 'windows';
<ActionSelector clientType={testClientType} ... />
```

## æœ€ä½³å®è·µ

### 1. ä¿æŒé…ç½®ç®€æ´

- æè¿°æ§åˆ¶åœ¨ 20 å­—ä»¥å†…
- ä½¿ç”¨æ¸…æ™°çš„åŠ¨è¯å¼€å¤´
- é¿å…æŠ€æœ¯æœ¯è¯­

### 2. åˆç†åˆ†ç±»

```
åŸºç¡€æ“ä½œ â†’ é«˜é¢‘ä½¿ç”¨ï¼Œç®€å•ç›´æ¥
é«˜çº§æ“ä½œ â†’ å¤æ‚åœºæ™¯ï¼Œéœ€è¦é…ç½®
ç³»ç»Ÿæ“ä½œ â†’ æœåŠ¡ç®¡ç†ï¼Œè°¨æ…ä½¿ç”¨
```

### 3. å‘½åä¸€è‡´æ€§

```
âœ… å¥½çš„å‘½åï¼š
- AI æ‰§è¡Œ
- AI è„šæœ¬
- æœåŠ¡å‘½ä»¤

âŒ ä¸å¥½çš„å‘½åï¼š
- Execute AI
- run script
- CMD
```

### 4. åŠæ—¶æ›´æ–°æ–‡æ¡£

æ¯æ¬¡æ·»åŠ æ–° action éƒ½åº”è¯¥æ›´æ–°ï¼š

- é…ç½®æ³¨é‡Š
- API æ–‡æ¡£
- ç”¨æˆ·æŒ‡å—

## ç›¸å…³ç»„ä»¶

### MetaForm

æä¾›å®¢æˆ·ç«¯ç±»å‹é€‰æ‹©ï¼ŒActionSelector ä¼šå“åº”è¿™ä¸ªé€‰æ‹©ï¼š

```tsx
<MetaForm 
  meta={meta}
  onChange={setMeta}  // æ”¹å˜ clientType ä¼šå½±å“ ActionSelector
/>

<ActionSelector
  clientType={meta.clientType || 'web'}  // ä» meta è·å–
  ...
/>
```

### JsonPreview

æ˜¾ç¤ºå®Œæ•´çš„æ¶ˆæ¯ç»“æ„ï¼ŒåŒ…å«é€‰ä¸­çš„ actionï¼š

```json
{
  "meta": {
    "clientType": "web"
  },
  "payload": {
    "action": "ai",  // â† ActionSelector é€‰æ‹©çš„
    "params": "..."
  }
}
```

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šActionSelector ä¸€ç›´æ˜¾ç¤º"åŠ è½½ä¸­"

**å¯èƒ½åŸå› ï¼š**

1. æœåŠ¡ç«¯æœªå¯åŠ¨
2. API ç«¯å£ä¸å¯¹
3. ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ­¥éª¤ï¼š**

```bash
# 1. æ£€æŸ¥æœåŠ¡ç«¯
curl http://localhost:3000/api/client-type-actions

# 2. å¦‚æœæ— å“åº”ï¼Œå¯åŠ¨æœåŠ¡ç«¯
cd apps/server
pnpm dev

# 3. åˆ·æ–° Web é¡µé¢
```

### é—®é¢˜ï¼šåˆ‡æ¢å®¢æˆ·ç«¯å ActionSelector æ²¡å˜åŒ–

**å¯èƒ½åŸå› ï¼š**

- `clientType` æ²¡æœ‰æ­£ç¡®ä¼ é€’
- ç»„ä»¶æ²¡æœ‰é‡æ–°æ¸²æŸ“

**è§£å†³æ­¥éª¤ï¼š**

1. æ£€æŸ¥ `meta.clientType` çš„å€¼
2. ç¡®è®¤ `ActionSelector` çš„ `clientType` prop
3. æ‰“å¼€ React DevTools æŸ¥çœ‹ç»„ä»¶ props

### é—®é¢˜ï¼šæ˜¾ç¤º"åŠ è½½å¤±è´¥"

**é”™è¯¯ç¤ºä¾‹ï¼š**

```
âŒ åŠ è½½å¤±è´¥: Failed to fetch
```

**è§£å†³æ­¥éª¤ï¼š**

1. ç¡®è®¤æœåŠ¡ç«¯è¿è¡Œåœ¨ `http://localhost:3000`
2. æ£€æŸ¥ CORS é…ç½®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œé”™è¯¯
4. å°è¯•ç›´æ¥è®¿é—® API

### é—®é¢˜ï¼šæ‰€æœ‰ actions éƒ½æ˜¾ç¤ºè­¦å‘Š

**å¯èƒ½åŸå› ï¼š**

- `clientType` å€¼ä¸æ­£ç¡®
- é…ç½®æœªæ­£ç¡®åŠ è½½

**è§£å†³æ­¥éª¤ï¼š**

1. æ£€æŸ¥ `meta.clientType` çš„å€¼
2. åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½é…ç½®
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

## é«˜çº§ç”¨æ³•

### ç¼–ç¨‹å¼è·å–é…ç½®

```typescript
import { useClientTypeActions } from '@/hooks/useClientTypeActions';

function MyComponent() {
  const { 
    config,
    getActionsForClientType,
    isActionSupported,
  } = useClientTypeActions();

  // è·å– Web ç«¯æ‰€æœ‰ actions
  const webActions = getActionsForClientType('web');
  
  // æ£€æŸ¥æ˜¯å¦æ”¯æŒ
  const canConnect = isActionSupported('web', 'connectTab'); // true
  const canConnectWin = isActionSupported('windows', 'connectTab'); // false
  
  return <div>...</div>;
}
```

### è‡ªå®šä¹‰ UI

```typescript
function CustomActionSelector({ clientType }: { clientType: ClientType }) {
  const { getActionsByCategory } = useClientTypeActions();
  const { basic, advanced, system } = getActionsByCategory(clientType);
  
  return (
    <div>
      <h3>åŸºç¡€æ“ä½œ</h3>
      {basic.map(action => (
        <button key={action.action}>
          {action.name}
        </button>
      ))}
      
      <h3>é«˜çº§æ“ä½œ</h3>
      {advanced.map(action => (
        <button key={action.action}>
          {action.name}
        </button>
      ))}
      
      <h3>ç³»ç»Ÿæ“ä½œ</h3>
      {system.map(action => (
        <button key={action.action}>
          {action.name}
        </button>
      ))}
    </div>
  );
}
```

### æ¡ä»¶æ¸²æŸ“

```typescript
function ConditionalActions({ clientType }: { clientType: ClientType }) {
  const { isActionSupported } = useClientTypeActions();
  
  return (
    <div>
      {isActionSupported(clientType, 'connectTab') && (
        <button>è¿æ¥æ ‡ç­¾é¡µ</button>
      )}
      
      {isActionSupported(clientType, 'downloadVideo') && (
        <button>ä¸‹è½½è§†é¢‘</button>
      )}
      
      {/* AI å’Œ command ä¸¤ç«¯éƒ½æ”¯æŒ */}
      <button>AI æ‰§è¡Œ</button>
      <button>æœåŠ¡å‘½ä»¤</button>
    </div>
  );
}
```

## æ€§èƒ½ä¼˜åŒ–

### Hook ç¼“å­˜

`useClientTypeActions` å†…éƒ¨ä½¿ç”¨ `useMemo` ç¼“å­˜ç»“æœï¼š

```typescript
const availableActions = useMemo(
  () => getActionsForClientType(clientType),
  [clientType, getActionsForClientType]
);
```

### å‡å°‘é‡æ–°æ¸²æŸ“

åªæœ‰ `clientType` å˜åŒ–æ—¶æ‰é‡æ–°è·å– actionsã€‚

### API è°ƒç”¨ä¼˜åŒ–

é…ç½®åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶è·å–ä¸€æ¬¡ï¼Œåç»­ä½¿ç”¨ç¼“å­˜ã€‚

## ç›¸å…³æ–‡æ¡£

- [CLIENT_TYPE_USAGE.md](./CLIENT_TYPE_USAGE.md) - å®¢æˆ·ç«¯ç±»å‹ä½¿ç”¨æŒ‡å—
- [../../server/docs/CLIENT_TYPE_ACTION_VALIDATION.md](../../server/docs/CLIENT_TYPE_ACTION_VALIDATION.md) - æœåŠ¡ç«¯éªŒè¯ç³»ç»Ÿ
- [../../server/docs/ACTION_CONFIG_REFERENCE.md](../../server/docs/ACTION_CONFIG_REFERENCE.md) - é…ç½®å‚è€ƒ

## æ€»ç»“

ActionSelector ç°åœ¨æ˜¯ä¸€ä¸ªå®Œå…¨åŠ¨æ€çš„æ™ºèƒ½ç»„ä»¶ï¼š

- âœ… è‡ªåŠ¨ä»æœåŠ¡ç«¯è·å–é…ç½®
- âœ… æ ¹æ® clientType è¿‡æ»¤ actions
- âœ… åˆ†ç±»å±•ç¤ºï¼Œæ˜“äºæŸ¥æ‰¾
- âœ… å®æ—¶éªŒè¯ï¼Œé˜²æ­¢é”™è¯¯
- âœ… å‹å¥½æç¤ºï¼Œå¼•å¯¼ç”¨æˆ·
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†

è®©å¤šå¹³å°å¼€å‘å’Œæµ‹è¯•å˜å¾—ç®€å•é«˜æ•ˆï¼

---

**æœ€åæ›´æ–°ï¼š** 2025-10-13  
**çŠ¶æ€ï¼š** âœ… ç”Ÿäº§å°±ç»ª
