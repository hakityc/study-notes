# 模板端类型功能演示

## 界面布局

```
┌─────────────────────────────────────────────────────────┐
│  快速模板                          2 / 5 个模板          │
├─────────────────────────────────────────────────────────┤
│  [全部] [Web 🖥️] [Windows 🪟]                          │  ← 筛选按钮
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 腾讯会议-登录                  [🔵 Windows]       │  │  ← 端类型标签
│  │ 基于任务的流程模板                                │  │
│  │                                                   │  │
│  │ [使用 📤] [编辑 ✏️] [删除 🗑️]                     │  │  ← 操作按钮
│  │ aiScript                                          │  │
│  └──────────────────────────────────────────────────┘  │
│                                                         │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 百度搜索                       [🟢 Web]           │  │
│  │ 基于任务的流程模板                                │  │
│  │                                                   │  │
│  │ [使用 📤] [编辑 ✏️] [删除 🗑️]                     │  │
│  │ aiScript                                          │  │
│  └──────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## 功能演示步骤

### 1. 筛选功能演示

#### 步骤 1.1：查看所有模板

```
初始状态：[全部] 按钮高亮
显示：5 个模板（3 个 Web + 2 个 Windows）
```

#### 步骤 1.2：筛选 Windows 端

```
点击：[Windows 🪟] 按钮
显示：2 个模板
- 腾讯会议-登录 [🔵 Windows]
- 腾讯会议-加入会议 [🔵 Windows]
```

#### 步骤 1.3：筛选 Web 端

```
点击：[Web 🖥️] 按钮
显示：3 个模板
- 百度搜索 [🟢 Web]
- GitHub 登录 [🟢 Web]
- 淘宝购物 [🟢 Web]
```

### 2. 编辑功能演示

#### 步骤 2.1：打开编辑菜单

```
点击：模板右侧的 [编辑 ✏️] 按钮
弹出：下拉菜单
  ┌─────────────────────┐
  │ 🖥️  设为 Web 端      │
  │ 🪟  设为 Windows 端  │  ← 当前选中（禁用状态）
  └─────────────────────┘
```

#### 步骤 2.2：修改端类型

```
选择：🖥️ 设为 Web 端
结果：
  - 模板标签从 [🔵 Windows] 变为 [🟢 Web]
  - 显示提示：✅ 更新成功，模板已更新为 Web 端
  - 自动刷新模板列表
```

### 3. 加载功能演示

#### 步骤 3.1：加载 Windows 端模板

```
当前状态：
  - 表单显示：客户端类型 = Web
  
操作：点击"腾讯会议-登录"模板的 [使用 📤] 按钮

结果：
  1. ✅ 表单自动切换：客户端类型 = Windows
  2. ✅ 任务列表自动填充
  3. ✅ 元数据自动更新
  4. ✅ 显示提示：模板加载成功
```

#### 步骤 3.2：加载 Web 端模板

```
当前状态：
  - 表单显示：客户端类型 = Windows
  
操作：点击"百度搜索"模板的 [使用 📤] 按钮

结果：
  1. ✅ 表单自动切换：客户端类型 = Web
  2. ✅ 任务列表自动填充
  3. ✅ 元数据自动更新
  4. ✅ 显示提示：模板加载成功
```

### 4. 保存功能演示

#### 步骤 4.1：在 Windows 端保存模板

```
准备：
  - 表单设置：客户端类型 = Windows
  - 配置任务流程

操作：点击任务列表的 [保存为模板] 按钮

结果：
  - ✅ 自动记录 clientType = "windows"
  - ✅ 模板显示 [🔵 Windows] 标签
  - ✅ 显示在 Windows 筛选中
```

### 5. 批量更新演示

#### 步骤 5.1：在控制台执行批量更新

```javascript
// 打开浏览器控制台（F12）

// 导入工具函数
const { updateTemplatesClientType } = await import('/src/utils/templateStorage.ts');

// 将所有包含"腾讯会议"的模板改为 Windows 端
const count = updateTemplatesClientType(['腾讯会议'], 'windows');

// 输出：已更新 2 个模板为 Windows 端
console.log(`已更新 ${count} 个模板为 Windows 端`);
```

#### 步骤 5.2：查看更新结果

```
刷新页面后：
  - "腾讯会议-登录" 显示 [🔵 Windows]
  - "腾讯会议-加入会议" 显示 [🔵 Windows]
  - 在 Windows 筛选中可见
```

## 视觉标识说明

### 端类型标签样式

#### Web 端标签

```
┌──────────────┐
│ 🖥️  Web      │  ← 绿色背景，显示器图标
└──────────────┘
颜色：bg-green-100 text-green-700
```

#### Windows 端标签

```
┌──────────────┐
│ 🪟  Windows  │  ← 蓝色背景，窗口图标
└──────────────┘
颜色：bg-blue-100 text-blue-700
```

### 筛选按钮状态

#### 未选中状态

```
┌──────┐
│ Web  │  ← 灰色边框，白色背景
└──────┘
variant="outline"
```

#### 选中状态

```
┌──────┐
│ Web  │  ← 主题色背景，白色文字
└──────┘
variant="default"
```

### 编辑菜单项状态

#### 可用状态

```
🖥️  设为 Web 端  ← 鼠标悬停时高亮
```

#### 禁用状态

```
🪟  设为 Windows 端  ← 灰色，不可点击（当前已是 Windows 端）
disabled={true}
```

## 交互流程图

```
                    ┌──────────────┐
                    │  创建模板    │
                    └──────┬───────┘
                           │
                  ┌────────▼────────┐
                  │ 自动记录端类型  │
                  └────────┬────────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
    ┌───▼────┐      ┌──────▼──────┐    ┌─────▼─────┐
    │ 筛选   │      │  编辑       │    │  加载     │
    │ 模板   │      │  端类型     │    │  模板     │
    └───┬────┘      └──────┬──────┘    └─────┬─────┘
        │                  │                  │
        │           ┌──────▼──────┐          │
        │           │ 更新标签    │          │
        │           │ 保存数据    │          │
        │           └──────┬──────┘          │
        │                  │                  │
        └──────────────────┼──────────────────┘
                           │
                    ┌──────▼───────┐
                    │ 显示更新结果 │
                    └──────────────┘
```

## 实际应用场景

### 场景 1：管理混合端模板

```
团队有 10 个模板：
- 6 个 Web 端（网页自动化）
- 4 个 Windows 端（桌面应用）

问题：难以区分和查找

解决：
1. 点击 [Windows] 按钮
2. 只显示 4 个 Windows 端模板
3. 快速找到需要的模板
```

### 场景 2：修正错误标记

```
发现问题：
- "腾讯会议-登录" 被标记为 Web 端
- 但实际是 Windows 桌面应用

解决：
1. 点击模板的 [编辑 ✏️] 按钮
2. 选择 "设为 Windows 端"
3. 标签变为 [🔵 Windows]
4. 问题解决
```

### 场景 3：快速切换端类型

```
工作流程：
1. 测试 Web 端模板（加载 → 自动切换到 Web）
2. 测试 Windows 端模板（加载 → 自动切换到 Windows）
3. 无需手动调整，全自动切换
```

## 注意事项

1. **旧模板兼容**：没有 `clientType` 字段的旧模板会默认显示为 Web 端
2. **数据一致性**：修改端类型时，模板和消息元数据会同时更新
3. **即时生效**：所有修改都是即时保存，无需额外确认
4. **视觉反馈**：每次操作都有明确的视觉反馈和提示信息
